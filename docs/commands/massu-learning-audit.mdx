---
title: "/massu-learning-audit"
description: "Validate auto-learning effectiveness including memory coverage, pattern scanner coverage, and failure recurrence"
order: 34
---

# /massu-learning-audit

A read-only audit that validates the auto-learning protocol is working effectively by checking pattern scanner coverage for each canonical rule, security scanner completeness, session state freshness, MCP tool memory coverage, and failure recurrence rates.

## Usage

```
/massu-learning-audit
```

## What It Does

The audit verifies that every issue encountered in the project has been captured by the learning system and will be caught automatically in the future. Any recurring issue is treated as evidence that auto-learning failed.

### Section 1: Pattern Scanner Coverage
Verifies the pattern scanner (`scripts/massu-pattern-scanner.sh`) exists, runs successfully, and contains checks for each automatable canonical rule:
- **CR-2**: File/module structure (import patterns, `.ts` extensions)
- **CR-3**: Secret detection
- **CR-11**: Tool registration completeness
- **CR-12**: Hook compilation readiness
- Config-driven patterns and ESM compliance

### Section 2: Security Scanner Coverage
Verifies the security scanner (`scripts/massu-security-scanner.sh`) covers:
- Hardcoded secrets and API keys
- Unsafe `eval`/`exec` patterns
- `@ts-ignore` and `@ts-nocheck` usage
- Prototype pollution vulnerabilities

### Section 3: Session State Coverage
Checks that `.claude/session-state/CURRENT.md` exists, is current, and contains documented decisions and recorded failures from recent work.

### Section 4: MCP Tool Memory Coverage
Verifies memory tools are available and queries for memory entries covering each major canonical rule. Every critical CR should have at least one memory entry.

### Section 5: Failure Recurrence Analysis
Searches for recurring patterns by scanning for `FIXME`, `TODO`, `HACK`, and `WORKAROUND` markers in source code. Checks recent git history for repeated fix patterns. Any recurrence count above zero is flagged as a learning failure.

### Section 6: Gap Report and Remediation
For each gap found:
- **Missing scanner rule**: Adds a grep check to `scripts/massu-pattern-scanner.sh`
- **Missing memory entry**: Ingests the pattern via MCP memory tools
- **Missing session state**: Updates `.claude/session-state/CURRENT.md`

### Section 7: Verification Gate
Runs all scanners, type check, tests, and hook compilation to confirm the full verification suite passes.

## When to Use

- **After incidents**: Verify the incident prevention pipeline captured the failure
- **Periodic learning audits**: Confirm the auto-learning system has no coverage gaps
- **After adding new canonical rules**: Ensure new rules have corresponding scanner checks
- **When bugs recur**: Diagnose why the learning system did not prevent recurrence
