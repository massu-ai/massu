---
title: "/massu-website-check"
description: "Website-specific verification for TypeScript, Next.js, and Supabase"
order: 19
---

# /massu-website-check

A read-only verification command specifically designed for Next.js + Supabase websites, running 8 specialized checks to ensure website code quality, security, and infrastructure health.

## Usage

```
/massu-website-check
```

## Verification Gates

The command runs 8 distinct verification gates:

### 1. TypeScript Compilation
Verifies all TypeScript files in the website directory compile without errors:
```bash
cd website && npx tsc --noEmit
```

### 2. Next.js Build
Attempts a production build to catch:
- Build-time errors
- Missing environment variables
- Route conflicts
- Invalid client/server component usage

### 3. Test Suite
Runs all website-specific tests including:
- Component tests
- API route tests
- Integration tests
- E2E tests (if configured)

### 4. Security Scan
Performs security analysis for:
- XSS vulnerabilities in components
- Exposed API keys or secrets
- CORS misconfigurations
- Unsafe dangerouslySetInnerHTML usage

### 5. Supabase Migration Health
Validates Supabase migration files:
- Sequential migration numbering
- No missing migrations
- Rollback scripts present
- No conflicting schema changes

### 6. RLS Coverage
Audits Row Level Security (RLS) policies:
- All tables have RLS enabled
- Policies cover SELECT, INSERT, UPDATE, DELETE
- No security gaps in policy rules
- Policy performance checks

### 7. API Endpoint Auth
Verifies authentication on API routes:
- Protected routes require auth
- Public routes explicitly marked
- Auth middleware properly configured
- Session validation present

### 8. Environment Variable Validation
Checks environment variable configuration:
- Required variables defined in `.env.example`
- Build-time variables prefixed with `NEXT_PUBLIC_`
- Server-side variables not exposed to client
- No hardcoded secrets in code

## Exit Criteria

The command succeeds only when **all 8 gates pass**. If any gate fails, the command reports the failure with details and exits with a non-zero status code.

## When to Use

- **Before deploying website changes**: Run as a pre-deployment checklist to catch issues before production
- **After Supabase migrations**: Verify migrations applied correctly and RLS policies are intact
- **Periodic website health checks**: Regular verification to catch configuration drift or security regressions
